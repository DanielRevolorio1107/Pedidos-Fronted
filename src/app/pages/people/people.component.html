<div class="container">
  <h2>Personas</h2>

  <div *ngIf="loading">Cargando...</div>
  <div *ngIf="!loading && error" class="err">{{ error }}</div>

  <!-- Formulario -->
  <div class="card">
    <h3>{{ editingId() == null ? 'Nueva persona' : 'Editar persona' }}</h3>
    <form [formGroup]="form" (ngSubmit)="save()">
      <div class="row">
        <div class="col">
          <label>Nombre</label>
          <input type="text" formControlName="firstName">
          <small class="hint" *ngIf="f.firstName.touched && f.firstName.invalid">Requerido</small>
        </div>
        <div class="col">
          <label>Apellido</label>
          <input type="text" formControlName="lastName">
          <small class="hint" *ngIf="f.lastName.touched && f.lastName.invalid">Requerido</small>
        </div>
        <div class="col">
          <label>Email</label>
          <input type="email" formControlName="email">
          <small class="hint" *ngIf="f.email.touched && f.email.invalid">Email inv√°lido</small>
        </div>
      </div>

      <div class="actions">
        <button type="submit" [disabled]="form.invalid || loading">Guardar</button>
        <button type="button" class="ghost" (click)="startCreate()">Nuevo</button>
        <button type="button" class="ghost" (click)="cancel()">Cancelar</button>
      </div>
    </form>
  </div>

  <!-- Tabla -->
  <table class="grid" *ngIf="list.length">
    <thead>
      <tr><th>ID</th><th>Nombre</th><th>Apellido</th><th>Email</th><th></th></tr>
    </thead>
    <tbody>
      <tr *ngFor="let p of list">
        <td>{{ p.id }}</td>
        <td>{{ p.firstName }}</td>
        <td>{{ p.lastName }}</td>
        <td>{{ p.email }}</td>
        <td class="right">
          <button type="button" (click)="startEdit(p)">Editar</button>
          <button type="button" class="danger" (click)="remove(p.id)">Eliminar</button>
        </td>
      </tr>
    </tbody>
  </table>

  <p *ngIf="!list.length && !loading">No hay personas.</p>
</div>
